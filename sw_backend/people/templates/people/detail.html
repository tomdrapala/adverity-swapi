<!DOCTYPE html>
<html lang="en">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Star Wars Explorer</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{% static 'people/style.css' %}" />
    <script src="https://unpkg.com/vue@next" defer></script>
    <script src="{% static 'people/detail.js' %}" defer></script>
  </head>
  <body id="vue_app">
    <header>
      <h1><a :href="url">Star Wars Characters Explorer</a></h1>
    </header>

    <section id="collections" class="details">
      <section v-if="!notFound">
        <table class="table table-striped table-bordered">
          <thead class="thead-dark">
            <tr>
              <th class="table-secondary">#</th>
              <th v-for="column in columns" class="table-secondary">
                [[ column ]]
              </th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(person, index1) in peopleData" :key="index1">
              <td>[[ index1 + 1 ]]</td>
              <td v-for="(column, index2) in columns" :key="index2">
                [[ getValue(person, column) ]]
              </td>
            </tr>
          </tbody>
        </table>

        <button v-if="allDataLoaded">All data has been loaded</button>
        <button v-else-if="fetchError">[[ fetchError ]]</button>
        <button v-else-if="isLoading">Loading...</button>
        <button v-else @click="loadData([[ peopleData.length ]])">
          Load 10 more
        </button>
      </section>
      <section id="not-found" v-else>
        <p>
          Looks like the requested file has been deleted.<br />
          Please choose a different one or fetch the fresh data.<br />
          Sorry for the inconvenience.
        </p>
      </section>
    </section>
  </body>
</html>
